<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <script src="https://telegram.org/js/telegram-web-app.js?2"></script>

    <style>

        body {
            background-color: #24272e;
        }

        #lesson {
            margin-top: 10px;
            background-color: #111419;
            border: 2px solid;
            border-radius: 20px;
            border-color: #111419;
        }

        #lecture {
            margin-top: 10px;
            background-color: #3f3f95;
            border: 2px solid;
            border-radius: 20px;
            border-color: #111419;
        }


        #name {
            margin-left: 10px;
            margin-top: 20px;
            color: #f5f5f5;
            font: caption;
        }

        #room {
            text-align: right;
            margin-top: -34px;
            margin-right: 10px;
            text-decoration-line: underline;
            color: #666d77;
            font-style: italic;
            font: caption;
        }

        #time {
            margin-left: 10px;
            color: #666d77;
            font: caption;
        }

    </style>
</head>
<body>

<div id="lessons"></div>

<script>
    let tg = window.Telegram.WebApp;

    loadLessons();

    function createLesson(inputName, inputTime, inputRoom, isLecture) {
        var name = document.createElement("p");
        name.id = "name";
        name.innerHTML = inputName;

        var time = document.createElement("p");
        time.id = "time";
        time.innerHTML = inputTime;

        var room = document.createElement("p");
        room.id = "room";
        room.innerHTML = inputRoom;

        var lesson = document.createElement("div");
        if (isLecture == "true") {
            lesson.id = "lecture";
        } else {
            lesson.id = "lesson";
        }
        lesson.appendChild(name);
        lesson.appendChild(room);
        lesson.appendChild(time);


        var lessons = document.getElementById("lessons");
        lessons.appendChild(lesson);
    }

    function loadLessons() {
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function() {
            const xml = this.responseXML.getElementsByTagName("LESSON");
            for (let i = 0; i < xml.length; i++) {
                let name = xml[i]
                    .getElementsByTagName("NAME")[0]
                    .childNodes[0]
                    .nodeValue;
                let time = xml[i]
                    .getElementsByTagName("TIME")[0]
                    .childNodes[0]
                    .nodeValue;
                let room = xml[i]
                    .getElementsByTagName("ROOM")[0]
                    .childNodes[0]
                    .nodeValue;
                let isLecture = xml[i]
                    .getElementsByTagName("LECTURE")[0]
                    .childNodes[0]
                    .nodeValue;
                createLesson(name, time, room, isLecture);
            }
        }
        xhttp.open("GET", "lessons.xml");
        xhttp.send();
    }

</script>

</body>
</html>